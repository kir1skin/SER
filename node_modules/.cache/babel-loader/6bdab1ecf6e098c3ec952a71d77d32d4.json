{"ast":null,"code":"const notify = node => !node.isLayoutDirty && node.willUpdate(false);\n\nfunction nodeGroup() {\n  const nodes = new Set();\n  const subscriptions = new WeakMap();\n\n  const dirtyAll = () => nodes.forEach(notify);\n\n  return {\n    add: node => {\n      nodes.add(node);\n      subscriptions.set(node, node.addEventListener(\"willUpdate\", dirtyAll));\n    },\n    remove: node => {\n      nodes.delete(node);\n      const unsubscribe = subscriptions.get(node);\n\n      if (unsubscribe) {\n        unsubscribe();\n        subscriptions.delete(node);\n      }\n\n      dirtyAll();\n    },\n    dirty: dirtyAll\n  };\n}\n\nexport { nodeGroup };","map":null,"metadata":{},"sourceType":"module"}